{% load static %}
<!DOCTYPE html>
<html lang="en">


<!-- datatables.html  21 Nov 2019 03:55:21 GMT -->
<!-- Header Section -->
{% include "includes/head.html" %}
<!-- End Header Section -->

<body>
  <div class="loader"></div>


  
  <div id="app">
    <div class="main-wrapper main-wrapper-1">
      <div class="navbar-bg"></div>

           <!-- Nav Bar Section  -->
        {% include "includes/nav.html" %}
        <!-- End Nav Bar Section -->
        
        <!-- Side Bar Section -->
        {% include "includes/sidebar.html" %}        
        <!-- End Side Bar Section -->
      <!-- Main Content -->
      <div class="main-content">
        <section class="section">
          <div class="section-body">
            <div class="row">
              <div class="col-6">
                <div class="card">
                  <div class="card-header">
                      <h4>Scan Case One</h4>
                  </div>
                    <div class="card-body">
                        <div class="row">
                        <div class="col col-md-4">
                                <select class="form-select" name="company" aria-label="Select 2">
                                    <option selected disabled>Select Company</option>
                                    {% for company in companies %}
                                    <option value="{{company.id}}">{{company.owner}}</option>
                                    {% endfor %}
                                  </select>
                        </div>
                        <div class="col col-md-4">
                            <select class="form-select" name="network" aria-label="Select 2">
                                <option selected disabled>Select network</option>
                                {% for network in networks %}
                                <option value="{{network.id}}">{{network.network}}</option>
                                {% endfor %}
                              </select>
                        </div>
                        <div class="col col-md-4">
                            <select class="form-select"  id="scan_case1" name="scan_case" aria-label="Select 2">
                                {% for scan in scan_cases %}
                                <option selected value="{{scan.name}}">{{scan.name}} </option>
                                {% endfor %}
                              </select>
                        </div>
                        </div>
                        <div>
                          <div id="accordion">   
                          </div>
                        </div>
                     
                    </div>
                  </div>
                
           
              </div>
              <div class="col-6">
                <div class="card">
                    <div class="card-header">
                        <h4>Scan Case Two</h4>
                    </div>
                      <div class="card-body">
                        <div class="row">
                            <div class="col col-md-4">
  
                            <input type="text" class="form-control" id="compony_name" readonly placeholder="compony name" required> 
                            </div>
                            <div class="col col-md-4">
                               
                                
                                 <input type="text" class="form-control" id="network" readonly placeholder="Network" required>
                               
                            </div>
                            <div class="col col-md-4">
                                <select class="form-select" id="scan_case2"  name="scan_case" aria-label="Select 2">
                                    <option selected disabled>Select Scan Case</option>
                                    {% for scan in scan_cases %}
                                    <option value="{{scan.scan_date}}">{{scan.name}}/option>
                                    {% endfor %}
                                  </select>
                            </div>
                            </div>
                      </div>
                    </div>
                  </div>
           
              </div>
              <div class="row">
                <div class="col-4"></div>
                <div class="col-4">
                    <button class="btn btn-primary " id="btn_comp">Compare Now</button>
                    <button class="btn btn-primary " id="btn_comp2">Compare Now</button>
                    <h2 id="data"></h2>
                </div>
                <div class="col-4"></div>
              </div>
            </div>
          </div>
        </section>




   

        <!-- Setting Bar Sections -->
        {% include "includes/settingbar.html" %}        
        <!-- Ending Setting Bar Sections -->


      </div>

      <!-- Footbar Section -->
      {% include "includes/footer.html" %}
      <!-- EndFootbar Section -->

    </div>
  </div>




  <!-- General JS Scripts -->

  <!-- Scripts Section -->
  {% include "includes/scripts.html" %}
  
  <script src="{% static 'assets/scripts/pages/company.js' %}"></script>


  <script>
    var onchang= false
    $(document).ready(function(){


      $('#scan_case1').on('change',function(){     
        event.preventDefault();
        var filterDate = $(this).val();
        var date = new Date(filterDate);
        var year = date.getFullYear().toString();
        var month = ('0' + (date.getMonth() + 1)).slice(-2);
        var day = ('0' + date.getDate()).slice(-2);
        var formattedDate = year + '-' + month + '-' + day;
        console.log(formattedDate);
        $.ajax({
          type:'GET',
          url:'/compare_by_date/',
          data:{'FILTERED_DATE': formattedDate},
          success: function(data) {
            $('#accordion').append(data)
          }

        })

        // $.ajax({
        //   type: 'GET',
        //   url: '/compare_by_date/',
        //   beforeSend: function () {
        //     // Show the loading spinner before the request is sent
        //     // $('#loading-spinner').show();
        //   },
        //   data: { 'filter_date': formattedDate },
        //   success: function (response) {
        //     $('#accordion').append(response)
           
        //   },
        //   complete: function () {
        //     $('#loading-spinner').hide();
        //   }


        // });
      });
       
        

      
   
    })
  </script>
  <!-- End Scripts Section -->
</body>



<!-- datatables.html  21 Nov 2019 03:55:25 GMT -->
</html>